<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="MAS Consultores - Soluciones integrales de gesti√≥n del talento, consultor√≠a, formaci√≥n y plataformas LMS para tu organizaci√≥n.">
<title>MAS Consultores - Gesti√≥n del Talento</title>
<style>
  :root {
    --navy: #1a2e4a;
    --navy2: #243d61;
    --navy3: #0f1f33;
    --red: #e84b2a;
    --red2: #f26344;
    --white: #ffffff;
    --gray: #f4f6f9;
    --text: #2d3748;
    --muted: #6b7a92;
    --green-wa: #25D366;
    --border: #dde3ed;
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  html { scroll-behavior:smooth; }
  body { font-family:'Segoe UI',system-ui,sans-serif; color:var(--text); overflow-x:hidden; }

  /* MEJORA A11Y: Estado focus visible para navegaci√≥n por teclado */
  *:focus-visible { outline: 2px solid var(--red); outline-offset: 2px; }

  /* LOGO SVG inline */
  .mas-logo { display:flex; align-items:center; gap:0; cursor:pointer; text-decoration:none; }
  .mas-logo svg { height:40px; width:auto; }

  /* NAVBAR */
  nav {
    position:fixed; top:0; width:100%; z-index:1000;
    background:rgba(26,46,74,0.97);
    backdrop-filter:blur(14px);
    border-bottom:1px solid rgba(232,75,42,0.25);
    transition:all 0.3s;
  }
  .nav-inner { max-width:1200px; margin:auto; display:flex; align-items:center; justify-content:space-between; padding:0 24px; height:72px; }
  .nav-links { display:flex; gap:26px; list-style:none; }
  .nav-links a { color:rgba(255,255,255,0.82); text-decoration:none; font-size:14px; font-weight:500; transition:color 0.2s; }
  .nav-links a:hover { color:var(--red2); }
  .nav-cta { display:flex; gap:10px; align-items:center; }
  .btn-wa-nav {
    background:var(--green-wa); color:#fff; padding:9px 16px; border-radius:50px;
    text-decoration:none; font-size:13px; font-weight:700; display:flex; align-items:center; gap:6px;
    transition:transform 0.2s,box-shadow 0.2s;
  }
  .btn-wa-nav:hover { transform:scale(1.05); box-shadow:0 4px 15px rgba(37,211,102,0.4); }
  .btn-contact-nav {
    background:var(--red); color:#fff; padding:9px 18px; border-radius:50px;
    text-decoration:none; font-size:13px; font-weight:700; transition:all 0.2s;
  }
  .btn-contact-nav:hover { background:var(--red2); transform:scale(1.05); }

  /* HERO */
  .hero {
    min-height:100vh;
    background:linear-gradient(135deg, var(--navy3) 0%, var(--navy) 55%, var(--navy2) 100%);
    display:flex; align-items:center; justify-content:center;
    position:relative; overflow:hidden;
    padding:110px 24px 70px;
  }
  .hero-decor { position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; }
  .hero-decor::before {
    content:''; position:absolute;
    width:600px; height:600px; border-radius:50%;
    background:radial-gradient(circle, rgba(232,75,42,0.08) 0%, transparent 70%);
    top:-150px; right:-150px;
  }
  .hero-decor::after {
    content:''; position:absolute;
    width:400px; height:400px; border-radius:50%;
    background:radial-gradient(circle, rgba(232,75,42,0.06) 0%, transparent 70%);
    bottom:-100px; left:-100px;
  }
  .hero-line {
    position:absolute; top:0; left:0; width:4px; height:100%;
    background:linear-gradient(180deg, transparent, var(--red), transparent);
  }

  .hero-content { max-width:1100px; margin:auto; display:grid; grid-template-columns:1fr 1fr; gap:64px; align-items:center; position:relative; z-index:2; }
  .hero-badge {
    display:inline-flex; align-items:center; gap:8px;
    background:rgba(232,75,42,0.12); border:1px solid rgba(232,75,42,0.35);
    color:var(--red2); padding:6px 16px; border-radius:50px;
    font-size:12px; font-weight:700; margin-bottom:22px; letter-spacing:1px; text-transform:uppercase;
  }
  .hero h1 { font-size:clamp(34px,4.5vw,56px); font-weight:900; color:#fff; line-height:1.1; margin-bottom:20px; }
  .hero h1 em { color:var(--red2); font-style:normal; }
  .hero p { color:rgba(255,255,255,0.72); font-size:17px; line-height:1.75; margin-bottom:36px; }
  .hero-btns { display:flex; gap:14px; flex-wrap:wrap; }
  .btn-primary { background:var(--red); color:#fff; padding:14px 28px; border-radius:50px; font-weight:700; font-size:15px; text-decoration:none; transition:all 0.2s; display:inline-flex; align-items:center; gap:8px; }
  .btn-primary:hover { background:var(--red2); transform:translateY(-2px); box-shadow:0 8px 28px rgba(232,75,42,0.45); }
  .btn-secondary { background:rgba(255,255,255,0.08); color:#fff; padding:14px 28px; border-radius:50px; font-weight:600; font-size:15px; text-decoration:none; border:1.5px solid rgba(255,255,255,0.22); transition:all 0.2s; display:inline-flex; align-items:center; gap:8px; }
  .btn-secondary:hover { background:rgba(255,255,255,0.18); transform:translateY(-2px); }

  .hero-stats { display:grid; grid-template-columns:1fr 1fr; gap:18px; }
  .stat-card {
    background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); border-radius:18px; padding:26px; text-align:center;
    backdrop-filter:blur(10px); transition:all 0.3s;
  }
  .stat-card:hover { border-color:rgba(232,75,42,0.4); transform:translateY(-4px); }
  .stat-num { font-size:44px; font-weight:900; color:var(--red2); line-height:1; }
  .stat-label { color:rgba(255,255,255,0.65); font-size:13px; margin-top:6px; line-height:1.4; }
  .stat-industries { grid-column:1/-1; background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.08); border-radius:18px; padding:22px; text-align:center; }
  .stat-industries p { color:rgba(255,255,255,0.45); font-size:11px; margin-bottom:12px; text-transform:uppercase; letter-spacing:1.5px; }
  .industries-list { display:flex; flex-wrap:wrap; gap:8px; justify-content:center; }
  .ind-tag { background:rgba(232,75,42,0.12); color:var(--red2); border:1px solid rgba(232,75,42,0.25); padding:4px 13px; border-radius:50px; font-size:12px; font-weight:500; }

  /* SECTIONS */
  section { padding:90px 24px; }
  .section-label { color:var(--red); font-size:11px; font-weight:700; letter-spacing:2px; text-transform:uppercase; margin-bottom:12px; }
  .section-title { font-size:clamp(28px,3.5vw,42px); font-weight:900; color:var(--navy); line-height:1.2; margin-bottom:16px; }
  .section-sub { color:var(--muted); font-size:17px; line-height:1.7; max-width:580px; }
  .section-header { margin-bottom:56px; }
  .container { max-width:1200px; margin:auto; }

  /* SERVICES */
  .services { background:var(--gray); }
  .services-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:24px; }
  .service-card {
    background:#fff; border-radius:20px; padding:32px; border:1.5px solid var(--border);
    transition:all 0.3s; position:relative; overflow:hidden;
  }
  .service-card::before {
    content:''; position:absolute; top:0; left:0; right:0; height:4px;
    background:linear-gradient(90deg, var(--red), var(--red2));
    transform:scaleX(0); transition:transform 0.3s; transform-origin:left;
  }
  .service-card:hover { transform:translateY(-6px); box-shadow:0 20px 50px rgba(26,46,74,0.1); border-color:rgba(232,75,42,0.25); }
  .service-card:hover::before { transform:scaleX(1); }
  .service-icon { width:54px; height:54px; background:linear-gradient(135deg,var(--navy),var(--navy2)); border-radius:14px; display:flex; align-items:center; justify-content:center; font-size:22px; margin-bottom:20px; }
  .service-card h3 { font-size:20px; font-weight:800; color:var(--navy); margin-bottom:12px; }
  .service-card p { color:var(--muted); font-size:14px; line-height:1.7; margin-bottom:24px; }
  .service-cta-row { display:flex; gap:10px; flex-wrap:wrap; }
  .btn-wa-sm { background:var(--green-wa); color:#fff; padding:8px 14px; border-radius:50px; font-size:12px; font-weight:700; text-decoration:none; display:inline-flex; align-items:center; gap:5px; transition:all 0.2s; }
  .btn-wa-sm:hover { transform:scale(1.05); box-shadow:0 4px 12px rgba(37,211,102,0.35); }
  .btn-info-sm { background:transparent; color:var(--navy); padding:8px 14px; border-radius:50px; font-size:12px; font-weight:700; text-decoration:none; border:1.5px solid var(--navy); transition:all 0.2s; }
  .btn-info-sm:hover { background:var(--navy); color:#fff; }

  /* TESTIMONIALS */
  .testimonials { background:linear-gradient(135deg, var(--navy3) 0%, var(--navy) 100%); }
  .testimonials .section-title { color:#fff; }
  .test-track { display:flex; transition:transform 0.5s ease; }
  .test-card { min-width:100%; padding:42px; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); border-radius:20px; }
  .test-quote { font-size:clamp(17px,2.5vw,22px); color:#fff; line-height:1.65; font-style:italic; margin-bottom:28px; }
  .test-quote::before { content:'"'; font-size:64px; color:var(--red2); line-height:0; vertical-align:-22px; margin-right:6px; }
  .test-author { display:flex; align-items:center; gap:16px; }
  .test-avatar { width:50px; height:50px; border-radius:50%; background:var(--red); display:flex; align-items:center; justify-content:center; font-weight:800; color:#fff; font-size:18px; flex-shrink:0; }
  .test-name { color:#fff; font-weight:700; }
  .test-role { color:rgba(255,255,255,0.55); font-size:13px; }
  .test-dots { display:flex; gap:8px; justify-content:center; margin-top:32px; }
  .test-dot { width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,0.25); cursor:pointer; transition:all 0.25s; }
  .test-dot.active { background:var(--red2); width:26px; border-radius:4px; }

  /* CASES */
  .cases-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:24px; }
  .case-card { border-radius:20px; overflow:hidden; border:1.5px solid var(--border); transition:all 0.3s; background:#fff; }
  .case-card:hover { transform:translateY(-6px); box-shadow:0 20px 50px rgba(26,46,74,0.1); }
  .case-img { height:160px; background:linear-gradient(135deg, var(--navy) 0%, var(--navy2) 100%); display:flex; align-items:center; justify-content:center; font-size:46px; }
  .case-body { padding:26px; }
  .case-company { font-size:11px; font-weight:700; color:var(--red); text-transform:uppercase; letter-spacing:1px; margin-bottom:8px; }
  .case-body h3 { font-size:18px; font-weight:800; color:var(--navy); margin-bottom:10px; }
  .case-body p { color:var(--muted); font-size:14px; line-height:1.65; margin-bottom:20px; }
  .btn-link { color:var(--navy); font-size:13px; font-weight:700; text-decoration:none; display:inline-flex; align-items:center; gap:5px; transition:all 0.2s; }
  .btn-link:hover { color:var(--red); gap:10px; }

  /* LEAD FORM */
  .lead-section { background:var(--gray); }
  .lead-wrap { display:grid; grid-template-columns:1fr 1fr; gap:64px; align-items:start; }
  .lead-info h2 { font-size:clamp(26px,3vw,38px); font-weight:900; color:var(--navy); margin-bottom:16px; }
  .lead-info p { color:var(--muted); line-height:1.75; margin-bottom:28px; }
  .lead-wa-big {
    display:flex; align-items:center; gap:14px;
    background:var(--green-wa); color:#fff; padding:16px 24px; border-radius:16px;
    text-decoration:none; font-weight:700; font-size:16px;
    transition:all 0.2s; box-shadow:0 8px 25px rgba(37,211,102,0.3); margin-bottom:14px;
  }
  .lead-wa-big:hover { transform:translateY(-2px); box-shadow:0 12px 35px rgba(37,211,102,0.4); }
  .wa-icon { font-size:30px; }
  .lead-wa-sub { color:var(--muted); font-size:13px; margin-bottom:22px; }
  .divider-or { display:flex; align-items:center; gap:12px; color:var(--muted); font-size:13px; margin:18px 0; }
  .divider-or::before,.divider-or::after { content:''; flex:1; height:1px; background:var(--border); }
  .trust-item { display:flex; align-items:center; gap:10px; color:var(--muted); font-size:14px; margin-bottom:10px; }
  .trust-item span { color:var(--red); font-size:16px; }

  .form-card { background:#fff; border-radius:24px; padding:36px; box-shadow:0 12px 40px rgba(26,46,74,0.08); border:1.5px solid var(--border); }
  .form-card h3 { font-size:20px; font-weight:800; color:var(--navy); margin-bottom:6px; }
  .form-sub { color:var(--muted); font-size:14px; margin-bottom:26px; }
  .form-step { display:none; }
  .form-step.active { display:block; }
  .form-progress { display:flex; gap:6px; margin-bottom:26px; }
  .form-progress-bar { height:4px; flex:1; border-radius:2px; background:#e8edf5; transition:background 0.3s; }
  .form-progress-bar.done { background:var(--red); }
  .form-label { display:block; font-size:13px; font-weight:600; color:var(--navy); margin-bottom:8px; }
  .form-input,.form-select,.form-textarea {
    width:100%; padding:12px 16px; border:1.5px solid var(--border); border-radius:10px;
    font-size:14px; color:var(--text); transition:border-color 0.2s; outline:none; font-family:inherit; background:#fff;
  }
  .form-input:focus,.form-select:focus,.form-textarea:focus { border-color:var(--red); }
  /* MEJORA: Clase para mostrar errores en inputs */
  .form-input.error, .form-select.error { border-color: var(--red2); background-color: #fff5f5; }
  
  .form-textarea { resize:vertical; min-height:80px; }
  .form-row { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
  .form-group { margin-bottom:18px; }
  .form-chips { display:flex; flex-wrap:wrap; gap:8px; }
  .chip-option { padding:8px 14px; border-radius:50px; border:1.5px solid var(--border); font-size:13px; cursor:pointer; transition:all 0.2s; }
  .chip-option:hover,.chip-option.selected { background:var(--navy); color:#fff; border-color:var(--navy); }
  .btn-next { background:var(--navy); color:#fff; padding:12px 24px; border-radius:10px; border:none; font-size:14px; font-weight:700; cursor:pointer; transition:all 0.2s; width:100%; margin-top:6px; }
  .btn-next:hover { background:var(--red); }
  .btn-submit { background:var(--red); color:#fff; padding:14px 28px; border-radius:10px; border:none; font-size:15px; font-weight:800; cursor:pointer; transition:all 0.2s; width:100%; }
  .btn-submit:hover { background:var(--red2); transform:translateY(-1px); box-shadow:0 8px 24px rgba(232,75,42,0.35); }
  .step-nav { display:flex; gap:10px; }
  .btn-back { background:transparent; color:var(--muted); padding:12px 20px; border-radius:10px; border:1.5px solid var(--border); font-size:14px; font-weight:600; cursor:pointer; }
  .form-success { text-align:center; padding:24px 0; }
  .form-success .check { font-size:60px; margin-bottom:16px; }
  .form-success h3 { color:var(--navy); font-size:22px; font-weight:800; margin-bottom:10px; }
  .form-success p { color:var(--muted); font-size:14px; line-height:1.65; }
  .success-wa { display:flex; align-items:center; gap:10px; justify-content:center; background:var(--green-wa); color:#fff; padding:14px 20px; border-radius:12px; font-weight:700; text-decoration:none; margin-top:20px; }
  .error-text { color: var(--red2); font-size: 12px; margin-top: 4px; display: none; }

  /* CHATBOT */
  #chatbot-btn {
    position:fixed; bottom:28px; right:28px; z-index:9999;
    width:62px; height:62px; border-radius:50%;
    background:linear-gradient(135deg, var(--navy), var(--navy2));
    border:2px solid var(--red); color:#fff; font-size:26px;
    cursor:pointer; display:flex; align-items:center; justify-content:center;
    box-shadow:0 8px 28px rgba(26,46,74,0.45);
    transition:transform 0.3s; animation:pulse-bot 2.5s ease-in-out infinite;
  }
  #chatbot-btn:hover { transform:scale(1.1); }
  @keyframes pulse-bot { 0%,100%{box-shadow:0 8px 28px rgba(26,46,74,0.45)} 50%{box-shadow:0 8px 36px rgba(232,75,42,0.5)} }
  .bot-badge { position:absolute; top:-4px; right:-4px; background:var(--red); color:#fff; font-size:9px; font-weight:800; padding:2px 6px; border-radius:10px; }

  #wa-float {
    position:fixed; bottom:104px; right:28px; z-index:9999;
    background:var(--green-wa); color:#fff; width:58px; height:58px;
    border-radius:50%; display:flex; align-items:center; justify-content:center;
    font-size:26px; text-decoration:none; box-shadow:0 8px 25px rgba(37,211,102,0.4);
    transition:transform 0.2s;
  }
  #wa-float:hover { transform:scale(1.1); }

  #chatbot-window {
    position:fixed; bottom:108px; right:28px; z-index:9998;
    width:360px; max-height:520px; background:#fff;
    border-radius:22px; box-shadow:0 24px 64px rgba(26,46,74,0.2);
    display:none; flex-direction:column; overflow:hidden;
    border:1.5px solid rgba(232,75,42,0.15);
  }
  #chatbot-window.open { display:flex; }
  .chat-header { background:linear-gradient(135deg, var(--navy3), var(--navy)); padding:18px 20px; display:flex; align-items:center; gap:12px; }
  .chat-avatar { width:40px; height:40px; border-radius:50%; background:var(--red); display:flex; align-items:center; justify-content:center; font-size:18px; flex-shrink:0; }
  .chat-header-info { flex:1; }
  .chat-header-info strong { color:#fff; font-size:15px; display:block; }
  .chat-header-info span { color:rgba(255,255,255,0.55); font-size:12px; }
  .chat-close { color:rgba(255,255,255,0.55); cursor:pointer; font-size:18px; line-height:1; padding:4px; }
  .chat-messages { flex:1; overflow-y:auto; padding:18px; display:flex; flex-direction:column; gap:12px; max-height:310px; }
  .msg { max-width:82%; }
  .msg-bot { align-self:flex-start; }
  .msg-user { align-self:flex-end; }
  .msg-bubble { padding:10px 14px; border-radius:14px; font-size:13px; line-height:1.55; }
  .msg-bot .msg-bubble { background:#f4f6f9; color:var(--text); border-bottom-left-radius:4px; }
  .msg-user .msg-bubble { background:var(--navy); color:#fff; border-bottom-right-radius:4px; }
  .msg-options { display:flex; flex-wrap:wrap; gap:6px; margin-top:8px; }
  .msg-opt { padding:6px 12px; border:1.5px solid var(--navy); border-radius:50px; font-size:12px; cursor:pointer; transition:all 0.2s; color:var(--navy); font-weight:600; background:#fff; }
  .msg-opt:hover { background:var(--navy); color:#fff; }
  .chat-input-row { display:flex; gap:8px; padding:14px 16px; border-top:1px solid #f0f0f0; }
  .chat-input { flex:1; border:1.5px solid var(--border); border-radius:50px; padding:9px 16px; font-size:13px; outline:none; font-family:inherit; }
  .chat-input:focus { border-color:var(--red); }
  .chat-send { background:var(--red); color:#fff; border:none; border-radius:50px; padding:9px 16px; cursor:pointer; font-size:13px; font-weight:700; transition:background 0.2s; }
  .chat-send:hover { background:var(--navy); }
  .typing { display:flex; gap:4px; align-items:center; padding:10px 14px; background:#f4f6f9; border-radius:14px; border-bottom-left-radius:4px; width:fit-content; }
  .typing span { width:6px; height:6px; border-radius:50%; background:var(--muted); animation:blink 1s infinite; }
  .typing span:nth-child(2){animation-delay:0.2s} .typing span:nth-child(3){animation-delay:0.4s}
  @keyframes blink{0%,80%,100%{opacity:0.2}40%{opacity:1}}

  /* FOOTER */
  footer { background:var(--navy3); padding:60px 24px 30px; }
  .footer-grid { max-width:1200px; margin:auto; display:grid; grid-template-columns:2fr 1fr 1fr 1fr; gap:40px; margin-bottom:48px; }
  .footer-brand p { color:rgba(255,255,255,0.5); font-size:14px; line-height:1.7; margin:16px 0 20px; }
  .footer-social { display:flex; gap:10px; }
  .social-btn { width:36px; height:36px; border-radius:50%; background:rgba(255,255,255,0.07); display:flex; align-items:center; justify-content:center; color:#fff; text-decoration:none; font-size:13px; transition:background 0.2s; font-weight:700; }
  .social-btn:hover { background:var(--red); }
  .footer-col h4 { color:#fff; font-size:14px; font-weight:700; margin-bottom:16px; }
  .footer-col ul { list-style:none; }
  .footer-col ul li { margin-bottom:10px; }
  .footer-col ul li a { color:rgba(255,255,255,0.45); text-decoration:none; font-size:13px; transition:color 0.2s; }
  .footer-col ul li a:hover { color:var(--red2); }
  .footer-contact-item { display:flex; gap:8px; color:rgba(255,255,255,0.45); font-size:13px; margin-bottom:12px; align-items:flex-start; }
  .footer-contact-item .ic { color:var(--red); margin-top:1px; }
  .footer-bottom { max-width:1200px; margin:auto; display:flex; justify-content:space-between; align-items:center; border-top:1px solid rgba(255,255,255,0.07); padding-top:24px; }
  .footer-bottom p { color:rgba(255,255,255,0.3); font-size:12px; }

  /* REVEAL */
  .reveal { opacity:0; transform:translateY(28px); transition:all 0.65s ease; }
  .reveal.visible { opacity:1; transform:translateY(0); }

  @media(max-width:768px){
    .hero-content,.lead-wrap,.footer-grid { grid-template-columns:1fr; }
    .nav-links { display:none; }
    .form-row { grid-template-columns:1fr; }
    #chatbot-window { width:calc(100vw - 32px); right:16px; bottom:96px; }
  }
</style>
</head>
<body>

<nav id="navbar">
  <div class="nav-inner">
    <a class="mas-logo" href="#inicio">
      <svg viewBox="0 0 160 50" xmlns="http://www.w3.org/2000/svg" aria-label="MAS Consultores Logo">
        <polygon points="0,40 14,10 28,40" fill="#e84b2a"/>
        <polygon points="7,40 14,25 21,40" fill="#1a2e4a"/>
        <text x="34" y="38" font-family="'Segoe UI',sans-serif" font-weight="900" font-size="30" fill="#ffffff" letter-spacing="-1">M</text>
        <text x="58" y="38" font-family="'Segoe UI',sans-serif" font-weight="900" font-size="30" fill="#e84b2a" letter-spacing="-1">A</text>
        <text x="78" y="38" font-family="'Segoe UI',sans-serif" font-weight="900" font-size="30" fill="#ffffff" letter-spacing="-1">S</text>
        <text x="34" y="48" font-family="'Segoe UI',sans-serif" font-size="8" fill="rgba(255,255,255,0.5)" letter-spacing="2">CONSULTORES</text>
      </svg>
    </a>
    <ul class="nav-links">
      <li><a href="#inicio">Inicio</a></li>
      <li><a href="#servicios">Servicios</a></li>
      <li><a href="#casos">Casos</a></li>
      <li><a href="#testimonios">Testimonios</a></li>
      <li><a href="#contacto">Contacto</a></li>
    </ul>
    <div class="nav-cta">
      <a class="btn-wa-nav" href="https://wa.me/56997416972?text=Hola%20MAS%20Consultores%2C%20quiero%20conocer%20sus%20soluciones." target="_blank" rel="noopener noreferrer">üí¨ WhatsApp</a>
      <a class="btn-contact-nav" href="#contacto">Solicitar reuni√≥n</a>
    </div>
  </div>
</nav>

<section class="hero" id="inicio">
  <div class="hero-decor"></div>
  <div class="hero-line"></div>
  <div class="hero-content">
    <div>
      <div class="hero-badge">üèÜ M√°s de 30 a√±os desarrollando talento</div>
      <h1>Desarrollamos el <em>Talento</em> de tu organizaci√≥n</h1>
      <p>En MAS Consultores acompa√±amos a personas y organizaciones a cumplir sus desaf√≠os estrat√©gicos con soluciones integrales y medibles de gesti√≥n del talento.</p>
      <div class="hero-btns">
        <a class="btn-primary" href="#contacto">üìã Diagn√≥stico gratuito</a>
        <a class="btn-secondary" href="https://wa.me/56997416972?text=Hola%2C%20me%20interesa%20conocer%20las%20soluciones%20de%20MAS%20Consultores." target="_blank" rel="noopener noreferrer">üí¨ Hablar ahora</a>
      </div>
    </div>
    <div class="hero-stats">
      <div class="stat-card">
        <div class="stat-num" data-count="500">+0</div>
        <div class="stat-label">Clientes en<br>15 pa√≠ses</div>
      </div>
      <div class="stat-card">
        <div class="stat-num" data-count="30">+0</div>
        <div class="stat-label">A√±os de<br>experiencia</div>
      </div>
      <div class="stat-industries">
        <p>Industrias que atendemos</p>
        <div class="industries-list">
          <span class="ind-tag">Energ√≠a</span><span class="ind-tag">Banca</span>
          <span class="ind-tag">Retail</span><span class="ind-tag">Miner√≠a</span>
          <span class="ind-tag">Educaci√≥n</span><span class="ind-tag">Telecomunicaciones</span>
          <span class="ind-tag">Sector P√∫blico</span><span class="ind-tag">Alimentaci√≥n</span>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="services" id="servicios">
  <div class="container">
    <div class="section-header reveal">
      <div class="section-label">Nuestros servicios</div>
      <div class="section-title">Soluciones integrales<br>de Gesti√≥n del Talento</div>
      <p class="section-sub">Acompa√±amos a tu organizaci√≥n en cada etapa del desarrollo de sus colaboradores con metodolog√≠as basadas en evidencia.</p>
    </div>
    <div class="services-grid">
      <div class="service-card reveal">
        <div class="service-icon" aria-hidden="true">üéØ</div>
        <h3>MAS Consultor√≠a</h3>
        <p>Asesoramos para dise√±ar, calcular e implementar las mejores soluciones formativas y de talento adaptadas a los desaf√≠os estrat√©gicos de tu organizaci√≥n.</p>
        <div class="service-cta-row">
          <a class="btn-wa-sm" href="https://wa.me/56997416972?text=Hola%2C%20me%20interesa%20el%20servicio%20de%20Consultor%C3%ADa%20de%20MAS." target="_blank" rel="noopener noreferrer">üí¨ Consultar</a>
          <a class="btn-info-sm" href="#contacto">M√°s info ‚Üí</a>
        </div>
      </div>
      <div class="service-card reveal">
        <div class="service-icon" aria-hidden="true">üìö</div>
        <h3>MAS Formaci√≥n</h3>
        <p>Dise√±amos e implementamos actividades formativas con foco en lograr los objetivos estrat√©gicos, generando impacto real y medible en las personas.</p>
        <div class="service-cta-row">
          <a class="btn-wa-sm" href="https://wa.me/56997416972?text=Hola%2C%20me%20interesa%20el%20servicio%20de%20Formaci%C3%B3n%20de%20MAS." target="_blank" rel="noopener noreferrer">üí¨ Consultar</a>
          <a class="btn-info-sm" href="#contacto">M√°s info ‚Üí</a>
        </div>
      </div>
      <div class="service-card reveal">
        <div class="service-icon" aria-hidden="true">üíª</div>
        <h3>MAS Plataformas</h3>
        <p>Dise√±amos e implementamos plataformas digitales que potencian el desarrollo de talentos, impactando en la cultura y crecimiento organizacional.</p>
        <div class="service-cta-row">
          <a class="btn-wa-sm" href="https://wa.me/56997416972?text=Hola%2C%20me%20interesa%20el%20servicio%20de%20Plataformas%20de%20MAS." target="_blank" rel="noopener noreferrer">üí¨ Consultar</a>
          <a class="btn-info-sm" href="#contacto">M√°s info ‚Üí</a>
        </div>
      </div>
      <div class="service-card reveal">
        <div class="service-icon" aria-hidden="true">üìä</div>
        <h3>MAS Medici√≥n</h3>
        <p>Evaluamos el impacto y el retorno sobre la inversi√≥n en programas de capital humano con metodolog√≠as basadas en evidencia y datos confiables.</p>
        <div class="service-cta-row">
          <a class="btn-wa-sm" href="https://wa.me/56997416972?text=Hola%2C%20me%20interesa%20el%20servicio%20de%20Medici%C3%B3n%20de%20MAS." target="_blank" rel="noopener noreferrer">üí¨ Consultar</a>
          <a class="btn-info-sm" href="#contacto">M√°s info ‚Üí</a>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="testimonials" id="testimonios">
  <div class="container">
    <div class="section-header reveal">
      <div class="section-label">Lo que dicen de nosotros</div>
      <div class="section-title">La experiencia de nuestros clientes</div>
    </div>
    <div class="reveal">
      <div style="overflow:hidden;border-radius:20px;">
        <div class="test-track" id="testTrack">
          <div class="test-card">
            <div class="test-quote">El apoyo de MAS ha sido fundamental en el logro de nuestras metas de aprendizaje. La mejor disposici√≥n, el mejor servicio.</div>
            <div class="test-author">
              <div class="test-avatar" aria-hidden="true">G</div>
              <div><div class="test-name">Gabriela Coll</div><div class="test-role">Learning & Leadership Development Lead Chile ¬∑ ACCENTURE</div></div>
            </div>
          </div>
          <div class="test-card">
            <div class="test-quote">MAS nos ayud√≥ a transformar nuestra cultura de aprendizaje. Sus metodolog√≠as son pr√°cticas, relevantes y generan resultados reales que el negocio valora.</div>
            <div class="test-author">
              <div class="test-avatar" aria-hidden="true">R</div>
              <div><div class="test-name">Ricardo Fuentes</div><div class="test-role">Gerente de Personas ¬∑ Banco Santander Chile</div></div>
            </div>
          </div>
          <div class="test-card">
            <div class="test-quote">La alianza con MAS nos permiti√≥ implementar un programa de desarrollo que realmente conecta con los objetivos estrat√©gicos del negocio.</div>
            <div class="test-author">
              <div class="test-avatar" aria-hidden="true">M</div>
              <div><div class="test-name">Mar√≠a Jos√© P√©rez</div><div class="test-role">Directora de Capital Humano ¬∑ Copec</div></div>
            </div>
          </div>
        </div>
      </div>
      <div class="test-dots" id="testDots">
        <button class="test-dot active" aria-label="Testimonio 1" onclick="goTest(0)"></button>
        <button class="test-dot" aria-label="Testimonio 2" onclick="goTest(1)"></button>
        <button class="test-dot" aria-label="Testimonio 3" onclick="goTest(2)"></button>
      </div>
    </div>
  </div>
</section>

<section id="casos" style="background:#fff">
  <div class="container">
    <div class="section-header reveal">
      <div class="section-label">Casos de √©xito</div>
      <div class="section-title">Historias reales,<br>resultados reales</div>
    </div>
    <div class="cases-grid">
      <div class="case-card reveal">
        <div class="case-img" aria-hidden="true">üè¶</div>
        <div class="case-body">
          <div class="case-company">Banco Santander</div>
          <h3>Programa de desarrollo de liderazgo</h3>
          <p>La Divisi√≥n de Personas de Banco Santander dise√±√≥ e implement√≥ m√∫ltiples iniciativas de desarrollo con el apoyo estrat√©gico de MAS Consultores.</p>
          <a class="btn-link" href="#contacto">Ver caso completo ‚Üí</a>
        </div>
      </div>
      <div class="case-card reveal">
        <div class="case-img" aria-hidden="true">‚õΩ</div>
        <div class="case-body">
          <div class="case-company">Copec</div>
          <h3>Evaluaci√≥n de competencias a escala</h3>
          <p>Durante diez a√±os, Copec utiliz√≥ exitosamente un programa de evaluaci√≥n de competencias dise√±ado e implementado por MAS Consultores.</p>
          <a class="btn-link" href="#contacto">Ver caso completo ‚Üí</a>
        </div>
      </div>
      <div class="case-card reveal">
        <div class="case-img" aria-hidden="true">üî•</div>
        <div class="case-body">
          <div class="case-company">Gasco</div>
          <h3>Transformaci√≥n cultural y formativa</h3>
          <p>Gasco, empresa m√°s que centenaria, apoy√≥ su transformaci√≥n estrat√©gica con programas de formaci√≥n y cultura dise√±ados por MAS Consultores.</p>
          <a class="btn-link" href="#contacto">Ver caso completo ‚Üí</a>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="lead-section" id="contacto">
  <div class="container">
    <div class="lead-wrap">
      <div class="lead-info reveal">
        <div class="section-label">¬øListo para el siguiente paso?</div>
        <h2>Cu√©ntanos tu desaf√≠o y te ayudamos a resolverlo</h2>
        <p>Hablemos de los retos de tu organizaci√≥n. Nuestro equipo est√° listo para dise√±ar una soluci√≥n a medida para ti.</p>
        <a class="lead-wa-big" href="https://wa.me/56997416972?text=Hola%20MAS%20Consultores%2C%20quiero%20conocer%20m%C3%A1s%20sobre%20sus%20soluciones%20de%20gesti%C3%B3n%20del%20talento." target="_blank" rel="noopener noreferrer">
          <span class="wa-icon" aria-hidden="true">üí¨</span>
          <div>
            <strong style="display:block;font-size:17px">Escr√≠benos por WhatsApp</strong>
            <span style="font-size:13px;font-weight:400;opacity:0.9">Respuesta en menos de 1 hora h√°bil</span>
          </div>
        </a>
        <div class="lead-wa-sub">Dannett Ortiz ¬∑ +56 9 9741 6972</div>
        <div class="divider-or">o completa el formulario</div>
        <div class="trust-item"><span>‚úÖ</span> Diagn√≥stico inicial gratuito</div>
        <div class="trust-item"><span>‚úÖ</span> Respuesta en 24 horas h√°biles</div>
        <div class="trust-item"><span>‚úÖ</span> Sin compromiso</div>
      </div>

      <div class="form-card reveal">
        <h3>Solicitar diagn√≥stico gratuito</h3>
        <p class="form-sub">Completa el formulario y te contactaremos con una propuesta personalizada.</p>
        <div class="form-progress">
          <div class="form-progress-bar done" id="p1"></div>
          <div class="form-progress-bar" id="p2"></div>
          <div class="form-progress-bar" id="p3"></div>
        </div>

        <form id="leadForm" onsubmit="event.preventDefault();">
          <div class="form-step active" id="step1">
            <div class="form-row">
              <div class="form-group">
                <label class="form-label" for="f_nombre">Nombre *</label>
                <input class="form-input" id="f_nombre" type="text" placeholder="Tu nombre completo" required>
                <div class="error-text">Este campo es obligatorio</div>
              </div>
              <div class="form-group">
                <label class="form-label" for="f_empresa">Empresa *</label>
                <input class="form-input" id="f_empresa" type="text" placeholder="Nombre de la empresa" required>
                <div class="error-text">Este campo es obligatorio</div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label" for="f_cargo">Cargo *</label>
                <input class="form-input" id="f_cargo" type="text" placeholder="Tu cargo actual" required>
                <div class="error-text">Este campo es obligatorio</div>
              </div>
              <div class="form-group">
                <label class="form-label" for="f_industria">Industria</label>
                <select class="form-select" id="f_industria">
                  <option value="">Selecciona...</option>
                  <option>Banca y Finanzas</option><option>Energ√≠a y Miner√≠a</option>
                  <option>Retail</option><option>Telecomunicaciones</option>
                  <option>Educaci√≥n</option><option>Sector P√∫blico</option>
                  <option>Salud</option><option>Tecnolog√≠a</option><option>Otra</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">¬øCu√°ntos colaboradores tiene tu organizaci√≥n?</label>
              <div class="form-chips" id="chips_tama√±o">
                <button type="button" class="chip-option" onclick="selectChip(this,'tama√±o')">1‚Äì50</button>
                <button type="button" class="chip-option" onclick="selectChip(this,'tama√±o')">51‚Äì200</button>
                <button type="button" class="chip-option" onclick="selectChip(this,'tama√±o')">201‚Äì1.000</button>
                <button type="button" class="chip-option" onclick="selectChip(this,'tama√±o')">+1.000</button>
              </div>
            </div>
            <button type="button" class="btn-next" onclick="validateAndGo(1, 2)">Siguiente ‚Üí</button>
          </div>

          <div class="form-step" id="step2">
            <div class="form-group">
              <label class="form-label">¬øQu√© soluci√≥n de RRHH est√°s buscando?</label>
              <div class="form-chips" id="chips_servicio">
                <button type="button" class="chip-option" onclick="selectChip(this,'servicio')">Consultor√≠a estrat√©gica</button>
                <button type="button" class="chip-option" onclick="selectChip(this,'servicio')">Programas de formaci√≥n</button>
                <button type="button" class="chip-option" onclick="selectChip(this,'servicio')">Plataforma LMS</button>
                <button type="button" class="chip-option" onclick="selectChip(this,'servicio')">Medici√≥n de impacto</button>
                <button type="button" class="chip-option" onclick="selectChip(this,'servicio')">Desarrollo de liderazgo</button>
                <button type="button" class="chip-option" onclick="selectChip(this,'servicio')">A√∫n no lo tengo claro</button>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label" for="f_desafio">¬øCu√°l es el principal desaf√≠o de tu organizaci√≥n en gesti√≥n de personas?</label>
              <textarea class="form-textarea" id="f_desafio" placeholder="Ej: necesitamos capacitar a nuestros l√≠deres, mejorar el engagement..."></textarea>
            </div>
            <div class="form-group">
              <label class="form-label">¬øCon qu√© urgencia necesitas implementar la soluci√≥n?</label>
              <div class="form-chips" id="chips_urgencia">
                <button type="button" class="chip-option" onclick="selectChip(this,'urgencia')">Este mes</button>
                <button type="button" class="chip-option" onclick="selectChip(this,'urgencia')">1‚Äì3 meses</button>
                <button type="button" class="chip-option" onclick="selectChip(this,'urgencia')">3‚Äì6 meses</button>
                <button type="button" class="chip-option" onclick="selectChip(this,'urgencia')">Solo explorando</button>
              </div>
            </div>
            <div class="step-nav">
              <button type="button" class="btn-back" onclick="goStep(1)">‚Üê Volver</button>
              <button type="button" class="btn-next" style="flex:1" onclick="validateAndGo(2, 3)">Siguiente ‚Üí</button>
            </div>
          </div>

          <div class="form-step" id="step3">
            <div class="form-group">
              <label class="form-label">¬øCu√°l es el presupuesto aproximado para este proyecto?</label>
              <div class="form-chips" id="chips_presupuesto">
                <button type="button" class="chip-option" onclick="selectChip(this,'presupuesto')">Hasta $5M CLP</button>
                <button type="button" class="chip-option" onclick="selectChip(this,'presupuesto')">$5M ‚Äì $20M CLP</button>
                <button type="button" class="chip-option" onclick="selectChip(this,'presupuesto')">$20M ‚Äì $50M CLP</button>
                <button type="button" class="chip-option" onclick="selectChip(this,'presupuesto')">+$50M CLP</button>
                <button type="button" class="chip-option" onclick="selectChip(this,'presupuesto')">Por definir</button>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label" for="f_email">Email *</label>
                <input class="form-input" id="f_email" type="email" placeholder="tu@empresa.cl" required>
                <div class="error-text">Email inv√°lido o vac√≠o</div>
              </div>
              <div class="form-group">
                <label class="form-label" for="f_telefono">Tel√©fono</label>
                <input class="form-input" id="f_telefono" type="tel" placeholder="+56 9 XXXX XXXX">
              </div>
            </div>
            <div class="form-group">
              <label class="form-label" for="f_extra">¬øAlgo m√°s que quieras contarnos?</label>
              <textarea class="form-textarea" id="f_extra" placeholder="Informaci√≥n adicional..." style="min-height:60px"></textarea>
            </div>
            <div class="step-nav">
              <button type="button" class="btn-back" onclick="goStep(2)">‚Üê Volver</button>
              <button type="button" class="btn-submit" onclick="submitForm()">üöÄ Enviar y solicitar diagn√≥stico</button>
            </div>
          </div>
        </form>

        <div class="form-step" id="stepSuccess">
          <div class="form-success">
            <div class="check" aria-hidden="true">‚úÖ</div>
            <h3>¬°Mensaje recibido!</h3>
            <p>Gracias por contactarnos. Nuestro equipo analizar√° tu informaci√≥n y te responderemos en las pr√≥ximas <strong>24 horas h√°biles</strong>.</p>
            <a class="success-wa" href="https://wa.me/56997416972" target="_blank" rel="noopener noreferrer">üí¨ Tambi√©n puedes escribirnos por WhatsApp</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<footer>
  <div class="footer-grid">
    <div class="footer-brand">
      <a class="mas-logo" href="#inicio">
        <svg viewBox="0 0 160 50" xmlns="http://www.w3.org/2000/svg">
          <polygon points="0,40 14,10 28,40" fill="#e84b2a"/>
          <polygon points="7,40 14,25 21,40" fill="#0f1f33"/>
          <text x="34" y="38" font-family="'Segoe UI',sans-serif" font-weight="900" font-size="30" fill="#ffffff" letter-spacing="-1">M</text>
          <text x="58" y="38" font-family="'Segoe UI',sans-serif" font-weight="900" font-size="30" fill="#e84b2a" letter-spacing="-1">A</text>
          <text x="78" y="38" font-family="'Segoe UI',sans-serif" font-weight="900" font-size="30" fill="#ffffff" letter-spacing="-1">S</text>
          <text x="34" y="48" font-family="'Segoe UI',sans-serif" font-size="8" fill="rgba(255,255,255,0.4)" letter-spacing="2">CONSULTORES</text>
        </svg>
      </a>
      <p>Desarrollamos las capacidades para que personas y organizaciones puedan cumplir sus desaf√≠os y prop√≥sitos estrat√©gicos.</p>
      <div class="footer-social">
        <a class="social-btn" href="#" aria-label="LinkedIn">in</a>
        <a class="social-btn" href="#" aria-label="Instagram">ig</a>
        <a class="social-btn" href="#" aria-label="YouTube">‚ñ∂</a>
      </div>
    </div>
    <div class="footer-col">
      <h4>Servicios</h4>
      <ul>
        <li><a href="#servicios">MAS Consultor√≠a</a></li>
        <li><a href="#servicios">MAS Formaci√≥n</a></li>
        <li><a href="#servicios">MAS Plataformas</a></li>
        <li><a href="#servicios">MAS Medici√≥n</a></li>
      </ul>
    </div>
    <div class="footer-col">
      <h4>Empresa</h4>
      <ul>
        <li><a href="#">Nosotros</a></li>
        <li><a href="#casos">Casos de √©xito</a></li>
        <li><a href="#testimonios">Testimonios</a></li>
        <li><a href="#">Blog</a></li>
        <li><a href="#">Trabaja con nosotros</a></li>
        <li><a href="#">Canal de denuncia</a></li>
      </ul>
    </div>
    <div class="footer-col">
      <h4>Contacto</h4>
      <div class="footer-contact-item"><span class="ic" aria-hidden="true">üìç</span>Hernando de Aguirre 268, Of. 101, Providencia, Santiago</div>
      <div class="footer-contact-item"><span class="ic" aria-hidden="true">üìû</span>+56 22 584 00 90</div>
      <div class="footer-contact-item"><span class="ic" aria-hidden="true">‚úâÔ∏è</span>info@masconsultores.cl</div>
      <div class="footer-contact-item"><span class="ic" aria-hidden="true">üí¨</span>+56 9 9741 6972</div>
    </div>
  </div>
  <div class="footer-bottom">
    <p>MAS Consultores ¬© 2025 ¬∑ Todos los derechos reservados</p>
    <p style="color:rgba(255,255,255,0.25);font-size:12px">Santiago, Chile</p>
  </div>
</footer>

<a id="wa-float" href="https://wa.me/56997416972?text=Hola%20MAS%20Consultores%2C%20me%20interesa%20conocer%20sus%20soluciones." target="_blank" rel="noopener noreferrer" aria-label="Escr√≠benos por WhatsApp">üí¨</a>

<button id="chatbot-btn" onclick="toggleChat()" aria-label="Abrir asistente virtual">
  ü§ñ
  <span class="bot-badge">IA</span>
</button>

<div id="chatbot-window">
  <div class="chat-header">
    <div class="chat-avatar" aria-hidden="true">ü§ñ</div>
    <div class="chat-header-info">
      <strong>Asistente MAS Consultores</strong>
      <span>üü¢ En l√≠nea ¬∑ Powered by IA</span>
    </div>
    <button class="chat-close" onclick="toggleChat()" style="background:none;border:none;" aria-label="Cerrar chat">‚úï</button>
  </div>
  <div class="chat-messages" id="chatMessages"></div>
  <div class="chat-input-row">
    <input class="chat-input" id="chatInput" placeholder="Escribe tu mensaje..." onkeypress="if(event.key==='Enter')sendMsg()">
    <button class="chat-send" onclick="sendMsg()">Enviar</button>
  </div>
</div>

<script>
// --- COUNTERS ---
function animateCounter(el) {
  const target = +el.dataset.count;
  let c = 0, step = target / 60;
  const t = setInterval(() => {
    c = Math.min(c + step, target);
    el.textContent = '+' + Math.round(c);
    if (c >= target) clearInterval(t);
  }, 25);
}

// --- SCROLL REVEAL ---
const observer = new IntersectionObserver(entries => {
  entries.forEach(e => {
    if (e.isIntersecting) {
      e.target.classList.add('visible');
      e.target.querySelectorAll('[data-count]').forEach(animateCounter);
    }
  });
}, { threshold: 0.1 });
document.querySelectorAll('.reveal').forEach(r => observer.observe(r));

// --- TESTIMONIALS ---
let testIdx = 0;
const testTrack = document.getElementById('testTrack');
const testDots = document.querySelectorAll('.test-dot');
let testInterval = setInterval(() => goTest((testIdx + 1) % 3), 5000);

function goTest(i) {
  testIdx = i;
  testTrack.style.transform = `translateX(-${i * 100}%)`;
  testDots.forEach((d, j) => d.classList.toggle('active', j === i));
  
  // MEJORA: Reiniciar el intervalo al hacer clic manual para evitar transiciones bruscas
  clearInterval(testInterval);
  testInterval = setInterval(() => goTest((testIdx + 1) % 3), 5000);
}

// --- FORM ---
const chips = {};
function selectChip(el, group) {
  document.querySelectorAll(`#chips_${group} .chip-option`).forEach(c => c.classList.remove('selected'));
  el.classList.add('selected');
  chips[group] = el.textContent;
}

// MEJORA: Validaci√≥n de campos antes de avanzar
function validateAndGo(currentStep, nextStep) {
  let isValid = true;
  const currentStepEl = document.getElementById('step' + currentStep);
  const requiredInputs = currentStepEl.querySelectorAll('input[required]');

  requiredInputs.forEach(input => {
    if (!input.checkValidity()) {
      input.classList.add('error');
      input.nextElementSibling.style.display = 'block';
      isValid = false;
    } else {
      input.classList.remove('error');
      input.nextElementSibling.style.display = 'none';
    }
  });

  if (isValid) goStep(nextStep);
}

function goStep(n) {
  document.querySelectorAll('.form-step').forEach(s => s.classList.remove('active'));
  document.getElementById('step' + n).classList.add('active');
  ['p1','p2','p3'].forEach((id, i) => document.getElementById(id).classList.toggle('done', i < n));
}

function submitForm() {
  const emailInput = document.getElementById('f_email');
  if (!emailInput.checkValidity()) {
    emailInput.classList.add('error');
    emailInput.nextElementSibling.style.display = 'block';
    return;
  }

  const data = {
    nombre: document.getElementById('f_nombre').value,
    empresa: document.getElementById('f_empresa').value,
    cargo: document.getElementById('f_cargo').value,
    industria: document.getElementById('f_industria').value,
    tama√±o: chips['tama√±o'] || 'No indicado',
    servicio: chips['servicio'] || 'No indicado',
    desafio: document.getElementById('f_desafio').value,
    urgencia: chips['urgencia'] || 'No indicado',
    presupuesto: chips['presupuesto'] || 'No indicado',
    email: emailInput.value,
    telefono: document.getElementById('f_telefono').value,
    extra: document.getElementById('f_extra').value,
  };
  
  console.log('Lead capturado:', data);
  // ‚Üí En producci√≥n: fetch('/api/lead', { method:'POST', body: JSON.stringify(data) })
  
  document.querySelectorAll('.form-step').forEach(s => s.classList.remove('active'));
  document.getElementById('stepSuccess').classList.add('active');
  ['p1','p2','p3'].forEach(id => document.getElementById(id).classList.add('done'));
}

// --- CHATBOT ---
let chatOpen = false, flowIdx = 0;
const leadData = {};

const flow = [
  { key:'init',    msg:'¬°Hola! üëã Soy el asistente de MAS Consultores.\n\nEstoy aqu√≠ para entender qu√© necesitas y conectarte con el consultor indicado.\n\n¬øCu√°l es tu nombre?', type:'text' },
  { key:'nombre',  msg:'¬°Mucho gusto, {nombre}! üòä\n\n¬øDe qu√© empresa nos visitas?', type:'text' },
  { key:'empresa', msg:'Excelente. ¬øCu√°l es el principal desaf√≠o de RRHH que enfrenta {empresa}?', type:'options', options:['Formaci√≥n y capacitaci√≥n','Desarrollo de liderazgo','Plataforma digital de aprendizaje','Medici√≥n del impacto en personas','Consultor√≠a estrat√©gica de RRHH','Otro desaf√≠o'] },
  { key:'servicio',msg:'Entendido. ¬øCu√°ntos colaboradores tiene {empresa}?', type:'options', options:['Menos de 100','100 ‚Äì 500','500 ‚Äì 2.000','M√°s de 2.000'] },
  { key:'tama√±o',  msg:'¬øCon qu√© urgencia necesitan una soluci√≥n?', type:'options', options:['Lo antes posible','En los pr√≥ximos 3 meses','Planificando para el a√±o','Solo explorando opciones'] },
  { key:'urgencia',msg:'Perfecto. ¬øCu√°l es tu email o WhatsApp para que te contacte un consultor de MAS?', type:'text' },
  { key:'contacto',msg:'¬°Listo! üéâ Tengo toda la informaci√≥n necesaria.\n\nUn consultor de MAS se pondr√° en contacto contigo a la brevedad. Tambi√©n puedes escribirnos directamente:', type:'final' },
];

function toggleChat() {
  chatOpen = !chatOpen;
  document.getElementById('chatbot-window').classList.toggle('open', chatOpen);
  if (chatOpen && flowIdx === 0) setTimeout(() => addBotMsg(flow[0].msg, flow[0].type, flow[0].options), 400);
}

function escapeHTML(str) {
  return str.replace(/[&<>'"]/g, tag => ({
      '&': '&amp;', '<': '&lt;', '>': '&gt;', "'": '&#39;', '"': '&quot;'
    }[tag]));
}

function addBotMsg(msg, type='text', options=[]) {
  const msgs = document.getElementById('chatMessages');
  const typing = document.createElement('div');
  typing.className = 'msg msg-bot';
  typing.innerHTML = '<div class="typing"><span></span><span></span><span></span></div>';
  msgs.appendChild(typing);
  msgs.scrollTop = msgs.scrollHeight;
  
  setTimeout(() => {
    if (msgs.contains(typing)) msgs.removeChild(typing);
    const d = document.createElement('div');
    d.className = 'msg msg-bot';
    
    // Evitar inyecci√≥n HTML b√°sica
    const safeNombre = escapeHTML(leadData.nombre || '');
    const safeEmpresa = escapeHTML(leadData.empresa || '');
    const text = msg.replace('{nombre}', safeNombre).replace('{empresa}', safeEmpresa);
    
    let html = `<div class="msg-bubble">${text.replace(/\n/g,'<br>')}</div>`;
    if (options?.length) html += '<div class="msg-options">' + options.map(o => `<button class="msg-opt" onclick="selectOpt(this,'${o}')">${o}</button>`).join('') + '</div>';
    if (type==='final') html += `<div style="margin-top:12px"><a href="https://wa.me/56997416972" target="_blank" rel="noopener noreferrer" style="background:#25D366;color:#fff;padding:8px 16px;border-radius:50px;text-decoration:none;font-size:13px;font-weight:700;display:inline-block">üí¨ Abrir WhatsApp</a></div>`;
    
    d.innerHTML = html;
    msgs.appendChild(d);
    msgs.scrollTop = msgs.scrollHeight;
  }, 1000);
}

function addUserMsg(text) {
  const msgs = document.getElementById('chatMessages');
  const d = document.createElement('div');
  d.className = 'msg msg-user';
  d.innerHTML = `<div class="msg-bubble">${escapeHTML(text)}</div>`;
  msgs.appendChild(d);
  msgs.scrollTop = msgs.scrollHeight;
}

function selectOpt(el, val) {
  el.closest('.msg-options').querySelectorAll('.msg-opt').forEach(o => {
    o.style.pointerEvents='none';
    o.style.opacity='0.6';
  });
  el.style.background='var(--navy)'; el.style.color='#fff'; el.style.opacity='1';
  addUserMsg(val); processAnswer(val);
}

function sendMsg() {
  const input = document.getElementById('chatInput');
  const val = input.value.trim();
  if (!val) return;
  input.value = '';
  addUserMsg(val); processAnswer(val);
}

function processAnswer(val) {
  const cur = flow[flowIdx];
  if (cur.key==='init') leadData.nombre=val;
  else if (cur.key==='nombre') leadData.empresa=val;
  else if (cur.key==='empresa') leadData.servicio=val;
  else if (cur.key==='servicio') leadData.tama√±o=val;
  else if (cur.key==='tama√±o') leadData.urgencia=val;
  else if (cur.key==='urgencia') leadData.contacto=val;
  
  flowIdx++;
  if (flowIdx < flow.length) {
    const next = flow[flowIdx];
    setTimeout(() => addBotMsg(next.msg, next.type, next.options), 700);
  }
  if (flowIdx === flow.length - 1) console.log('Bot lead:', leadData);
}
</script>
</body>
</html>
